<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://xmlns.jcp.org/jsf/html" 
	xmlns:f="http://xmlns.jcp.org/jsf/core" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

	<ui:composition template="/templates/_template.xhtml">
	
		<ui:define name="additional-content">
			<link type="text/css" rel="stylesheet" href="/resources/css/user.css" media="screen,projection" />
	   	</ui:define>
	   	
	   	<div id="navbar">
			<ui:define name="nav-expanded">
		      	<ui:include src="/templates/_quiz-nav.xhtml" />
			</ui:define>
			<ui:define name="nav-collapsed">
		      	<ui:include src="/templates/_quiz-nav.xhtml" />
			</ui:define>
		</div>

		<ui:define name="content">
			<div class="container">
				<div class="row justify-content-center mt-3">
				<h:form id="userRegisterForm" class="col-10 col-sm-10 col-md-10 col-xl-7">
					<h:messages globalOnly="true"/>
						<legend class="fs-3 fs-sm-2 text-center">Register new user with e-mail</legend>
						
						<div class="row row-cols-2">
						
							<div class="col-12 col-md-12 col-lg-3">				
								<h:outputLabel value="Username:" for="username"/>
							</div>
							<div class="col-12 col-md-12 col-lg-9 mt-1">
								<div class="input-group">
								  	<span class="input-group-text" id="username-addon"><i class="fas fa-user-circle"></i></span>
									<h:inputText id="username" styleClass="form-control shadow" value="#{userRegisterBean.user.username}" required="true" requiredMessage="You must insert a username" 
									validatorMessage="Username must contain between 4 and 20 characters">
										<f:validateLength maximum="20" minimum="4"/>
										<f:passThroughAttribute name="type" value="text"/>
										<f:passThroughAttribute name="placeholder" value="Insert your username"/>
										<f:passThroughAttribute name="aria-describedby" value="username-addon"/>
									</h:inputText>
								</div>
							</div>
							<h:message class="col-12 text-center text-danger" for="username"/>
							
							<div class="col-12 col-md-12 col-lg-3 mt-2">
								<h:outputLabel value="E-mail:" for="email"/>
							</div>
							<div class="col-12 col-md-12 col-lg-9 mt-1">
								<div class="input-group">
									<span class="input-group-text" id="email-addon"><i class="fas fa-envelope"></i></span>
									<h:inputText id="email" styleClass="col form-control shadow" value="#{userRegisterBean.user.email}" binding="#{emailComponent}" required="true" requiredMessage="You must insert an e-mail" 
										validator="#{userRegisterBean.validateEmail}">
										<f:passThroughAttribute name="type" value="email" />
										<f:passThroughAttribute name="placeholder" value="Insert your e-mail"/>
										<f:passThroughAttribute name="aria-describedby" value="email-addon"/>
									</h:inputText>
								</div>
							</div>
							<h:message class="col-12 text-center text-danger" for="email"/>
							
							<div class="col-12 col-md-12 col-lg-3 mt-2">
								<h:outputLabel value="Confirm email:" for="confirmEmail"/>
							</div>
							<div class="col-12 col-md-12 col-lg-9 mt-1">
								<div class="input-group">
									<span class="input-group-text" id="confirm-email-addon"><i class="far fa-envelope"></i></span>
									<h:inputText id="confirmEmail" styleClass="col form-control shadow" required="true" requiredMessage="You must confirm your e-email" value="#{userRegisterBean.confirmEmail}"
											autocomplete="false">
										<f:passThroughAttribute name="type" value="email" />
										<f:validator validatorId="equalsValidator"/>
										<f:attribute name="userEmail" value="#{emailComponent.value}"/>
										<f:passThroughAttribute name="placeholder" value="Confirm your e-mail"/>
										<f:passThroughAttribute name="aria-describedby" value="confirm-email-addon"/>
									</h:inputText>
								</div>
							</div>
							<h:message class="col-12 text-center text-danger" for="confirmEmail"/>
							
							<div class="col-12 col-md-12 col-lg-3 mt-2">
								<h:outputLabel value="Password:" for="password"/>
							</div>
							
							<div class="col-12 col-md-12 col-lg-9 mt-1">
								<div class="input-group">
									<span class="input-group-text" id="password-addon"><i class="fas fa-unlock"></i></span>
									<h:inputSecret id="password" styleClass="col form-control shadow" value="#{userRegisterBean.user.password}" binding="#{passwordComponent}" required="true" requiredMessage="You must insert a password"
									validatorMessage="Password must contain between 6 and 30 characters">
										<f:validateLength maximum="30" minimum="6"/>
										<f:passThroughAttribute name="placeholder" value="Insert your password"/>
										<f:passThroughAttribute name="aria-describedby" value="password-addon"/>
									</h:inputSecret>
								</div>
							</div>
							<h:message class="col-12 text-center text-danger" for="password"/>
							
							<div class="col-12 col-md-12 col-lg-3 mt-2">
								<h:outputLabel value="Confirm password:" for="confirmPassword"/>
							</div>
							<div class="col-12 col-md-12 col-lg-9 mt-1">
								<div class="input-group">
									<span class="input-group-text" id="confirm-password-addon"><i class="fas fa-unlock-alt"></i></span>
									<h:inputSecret id="confirmPassword" styleClass="col form-control shadow" required="true" requiredMessage="You must confirm your password">
										<f:validator validatorId="equalsValidator" />
										<f:attribute name="passwordEmail" value="#{passwordComponent.value}"/>
										<f:passThroughAttribute name="placeholder" value="Confirm your password"/>
										<f:passThroughAttribute name="aria-describedby" value="confirm-password-addon"/>	
									</h:inputSecret>
								</div>
							</div>
							<h:message class="col-12 text-center text-danger" for="confirmPassword"/>
						</div>
						<div class="col-12 col-sm-12 mx-auto mt-4">
							<h:commandButton value="Register" class="col-12 btn shadow" action="#{userRegisterBean.register}">
								<f:passThroughAttribute name="id" value="confirm-button"/>
							</h:commandButton>
						</div>
				</h:form>
				</div>
			</div>
		</ui:define>
	
	</ui:composition>

</html>