<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	
	<ui:composition template="/templates/_template.xhtml">
	
		<ui:define name="additional-content">
			<link type="text/css" rel="stylesheet" href="/resources/css/user.css" media="screen,projection" />
	   	</ui:define>
	   	
	   	<div id="navbar">
			<ui:define name="nav-expanded">
		      	<ui:include src="/templates/_about-nav.xhtml" />
			</ui:define>
			<ui:define name="nav-collapsed">
		      	<ui:include src="/templates/_about-nav.xhtml" />
			</ui:define>
		</div>
	
		<ui:define name="content">
			<div class="row justify-content-center mt-3">
				
				<h:commandButton type="button" class="col-8 col-sm-6 btn btn-danger shadow mt-4 mb-4" value="Delete my account" rendered="#{userDeleteBean.deleteAccountButtonRender}">
					<f:passThroughAttribute name="data-bs-toggle" value="modal"/>
					<f:passThroughAttribute name="data-bs-target" value="#firstDeleteUserModal"/>
				</h:commandButton>
				
				<h:commandButton value="Return to app" styleClass="col-10 btn mx-auto mt-3 mb-2 shadow" 
					onclick="triggerAppOpenAfterDeleteUser()" rendered="#{userDeleteBean.returnToAppRender}">
						<f:passThroughAttribute name="id" value="confirm-button"/>
				</h:commandButton>
			</div>
			
			<div class="modal fade" id="firstDeleteUserModal" tabindex="-1" aria-labelledby="firstDeleteUserModalLabel" aria-hidden="true">
			  	<div class="modal-dialog modal-dialog-centered">
				    <div class="modal-content">
					    <div class="modal-header">
					        <h5 class="modal-title" id="firstDeleteUserModalLabel">Delete My Account</h5>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					    </div>
					    <div class="modal-body">
				        	Are you sure you want to delete your account?
						</div>
					    <div class="modal-footer">
					        <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
							<button type="button" class="btn btn-warning" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#finalDeleteUserModal">
  								Delete my account
							</button>
					    </div>
				    </div>
				</div>
			</div>
			
			<div class="modal fade" id="finalDeleteUserModal" tabindex="-1" aria-labelledby="finalDeleteUserModalLabel" aria-hidden="true">
			  	<div class="modal-dialog modal-dialog-centered">
				    <div class="modal-content">
					    <div class="modal-header">
					        <h5 class="modal-title" id="finalDeleteUserModalLabel">Delete My Account</h5>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					    </div>
					    <div class="modal-body">
				        	Warning! If you delete your account now, all your data will be lost!
						</div>
					    <div class="modal-footer">
					        <button type="button" class="btn btn-success" data-bs-dismiss="modal">No, don't delete my account!</button>
						    <h:form>
						    	<h:commandButton styleClass="btn btn-danger" value="Please, I really want to delete my account!" action="#{userDeleteBean.androidDelete}"/>
						    </h:form>
					    </div>
				    </div>
				</div>
			</div>
			
			<script type="text/javascript" src="/resources/js/user.js"></script>
			
		</ui:define>
		
	</ui:composition>
</html>